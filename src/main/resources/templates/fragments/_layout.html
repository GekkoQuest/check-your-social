<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:fragment="layout(content)">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title th:text="${title != null ? title : 'Check Your Social'}">Check Your Social</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg" th:href="@{/favicon.svg}"/>
  <link rel="stylesheet" href="css/site.css" th:href="@{/css/site.css}">

  <style id="critical-css">
    /* Minimal fallback so the page isn't white if site.css fails to load */
    :root { --bg-1:#0e1016; --ink:#e4ebf7; }
    html,body{height:100%}
    body{margin:0;background:var(--bg-1);color:var(--ink);font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    .shell{min-height:100dvh;display:grid;place-items:center;padding:48px 20px 72px}
    .panel{width:min(1100px,92vw);background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);
      border-radius:18px;backdrop-filter:blur(8px);box-shadow:0 30px 80px rgba(0,0,0,.6);overflow:hidden}
    .panel-head{display:flex;justify-content:space-between;gap:16px;padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.08)}
    .panel-body{padding:16px 18px 22px}
    .panel-band{display:flex;justify-content:center;gap:8px;padding:10px;border-bottom:1px solid rgba(255,255,255,.08)}
    .orbit{position:fixed;right:22px;bottom:22px;display:grid;gap:10px}
    .orbit a,.orbit button{display:grid;place-items:center;width:48px;height:48px;border-radius:50%;
      background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);color:var(--ink);text-decoration:none}
    a{color:#7bdffb}
  </style>

</head>
<body class="bg-stars">
  <div class="shell">

    <!-- Central content panel -->
    <article class="panel">
      <header class="panel-head">
        <div>
          <h1 th:if="${title != null}" th:text="${title}">Check Your Social</h1>
          <div class="muted" th:if="${subtitle != null}" th:text="${subtitle}">Growth analytics, reimagined</div>
        </div>
        <div class="actions">
          <!-- space for page-specific actions if needed -->
        </div>
      </header>
      

<div class="panel-band">
  <div class="quick">
    <a href="/leaderboard?platform=YOUTUBE" th:href="@{/leaderboard(platform=${T(quest.gekko.cys.domain.Platform).YOUTUBE})}">YouTube Leaderboard</a>
    <a href="/leaderboard?platform=TWITCH" th:href="@{/leaderboard(platform=${T(quest.gekko.cys.domain.Platform).TWITCH})}">Twitch Leaderboard</a>
    <button id="open-search-2" type="button">Open Search</button>
  </div>
</div>
<div class="panel-body">
        <div th:insert="${content}"></div>
      </div>
    </article>

    <!-- Orbit dock (floating navigation + search) -->
    
<nav class="orbit" aria-label="Primary">
  <a href="/" th:href="@{/}" title="Overview"><span>üè†</span><span class="label">Overview</span></a>
  <a href="/leaderboard" th:href="@{/leaderboard}" title="Leaderboard"><span>üèÜ</span><span class="label">Leaderboard</span></a>
  <a href="/leaderboard" th:href="@{/leaderboard}" title="Discover"><span>üß≠</span><span class="label">Discover</span></a>
  <button id="open-search" type="button" title="Search"><span>üîé</span><span class="label">Search (‚åò/Ctrl + K)</span></button>
</nav>


    <!-- Command modal (universal search) -->
    <div class="modal" id="search-modal" aria-hidden="true">
      <div class="box">
        <form method="get" th:action="@{/leaderboard}">
          <input type="text" name="q" placeholder="Search channels‚Ä¶" th:value="${q}" />
          <select name="platform">
            <option value="YOUTUBE" th:selected="${platform == T(quest.gekko.cys.domain.Platform).YOUTUBE}">YouTube</option>
            <option value="TWITCH" th:selected="${platform == T(quest.gekko.cys.domain.Platform).TWITCH}">Twitch</option>
          </select>
          <button type="submit">Search</button>
        </form>
      </div>
    </div>

  </div>

  <script>
    // Command modal behavior + keyboard shortcuts
    (function(){
      const modal = document.getElementById('search-modal');
      const openBtn = document.getElementById('open-search');

      function openModal(){
        modal.setAttribute('aria-hidden','false');
        const input = modal.querySelector('input[name="q"]');
        setTimeout(()=> input && input.focus(), 10);
      }
      function closeModal(){
        modal.setAttribute('aria-hidden','true');
      }

      openBtn && openBtn.addEventListener('click', openModal);
      modal && modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
      window.addEventListener('keydown', (e)=>{
        const mod = e.metaKey || e.ctrlKey;
        if (mod && e.key.toLowerCase() === 'k'){ e.preventDefault(); openModal(); }
        if (e.key === 'Escape' && modal.getAttribute('aria-hidden') === 'false'){ closeModal(); }
        if (e.key === '/' && !mod && !e.altKey){
          const q = document.querySelector('input[name="q"]');
          if(q){ e.preventDefault(); q.focus(); q.select(); }
        }
      });
    })();
  
  // Wire secondary search button
  (function(){
    const modal = document.getElementById('search-modal');
    const btn = document.getElementById('open-search-2');
    function open(){ modal && modal.setAttribute('aria-hidden','false'); }
    btn && btn.addEventListener('click', open);
  })();
  </script>
</body>
</html>
