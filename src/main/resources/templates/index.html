<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:with="title='Home'"
      th:replace="~{fragments/_layout :: layout(~{::content})}">
<th:block th:fragment="content">

            </div>
        </div>
    </section>

    <!-- Top Channels Preview -->
    <section th:if="${topYouTubeChannels != null and !topYouTubeChannels.isEmpty()}">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">

            <!-- Top YouTube Channels -->
            <div>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <h2 style="margin: 0;">📺 Top YouTube</h2>
                    <a href="/leaderboard?platform=YOUTUBE" style="color: var(--primary); text-decoration: none; font-size: 0.9rem;">View All →</a>
                </div>

                <div style="background: var(--card-bg); border-radius: 12px; border: 1px solid var(--border); overflow: hidden;">
                    <div th:each="channel, iter : ${topYouTubeChannels}" th:if="${iter.index < 5}"
                         style="padding: 1rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 0.75rem;"
                         th:style="${iter.last} ? 'padding: 1rem; display: flex; align-items: center; gap: 0.75rem;' : 'padding: 1rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 0.75rem;'">

                        <div style="font-weight: 700; color: var(--muted); min-width: 24px;" th:text="${iter.index + 1}">1</div>

                        <img th:if="${channel.avatarUrl != null}"
                             th:src="${channel.avatarUrl}"
                             alt="avatar"
                             style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover;"/>

                        <div style="flex: 1; min-width: 0;">
                            <div>
                                <a th:href="@{/channel/{id}(id=${channel.id})}"
                                   th:text="${channel.title}"
                                   style="color: var(--text); text-decoration: none; font-weight: 600;">Channel</a>
                            </div>
                            <div style="font-size: 0.8rem; color: var(--muted);" th:text="${channel.handle}">@handle</div>
                        </div>

                        <div style="text-align: right; color: var(--primary); font-weight: 600; font-size: 0.9rem;">
                            <span th:text="${channel.subscribers != null ? #numbers.formatInteger(channel.subscribers, 0, 'COMMA') : '0'}">0</span>
                            <div style="font-size: 0.7rem; color: var(--muted);">subscribers</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Top Twitch Channels -->
            <div th:if="${topTwitchChannels != null and !topTwitchChannels.isEmpty()}">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <h2 style="margin: 0;">🎮 Top Twitch</h2>
                    <a href="/leaderboard?platform=TWITCH" style="color: var(--primary); text-decoration: none; font-size: 0.9rem;">View All →</a>
                </div>

                <div style="background: var(--card-bg); border-radius: 12px; border: 1px solid var(--border); overflow: hidden;">
                    <div th:each="channel, iter : ${topTwitchChannels}" th:if="${iter.index < 5}"
                         style="padding: 1rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 0.75rem;"
                         th:style="${iter.last} ? 'padding: 1rem; display: flex; align-items: center; gap: 0.75rem;' : 'padding: 1rem; border-bottom: 1px solid var(--border); display: flex; align-items: center; gap: 0.75rem;'">

                        <div style="font-weight: 700; color: var(--muted); min-width: 24px;" th:text="${iter.index + 1}">1</div>

                        <img th:if="${channel.avatarUrl != null}"
                             th:src="${channel.avatarUrl}"
                             alt="avatar"
                             style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover;"/>

                        <div style="flex: 1; min-width: 0;">
                            <div>
                                <a th:href="@{/channel/{id}(id=${channel.id})}"
                                   th:text="${channel.title}"
                                   style="color: var(--text); text-decoration: none; font-weight: 600;">Channel</a>
                            </div>
                            <div style="font-size: 0.8rem; color: var(--muted);" th:text="${channel.handle}">@handle</div>
                        </div>

                        <div style="text-align: right; color: var(--primary); font-weight: 600; font-size: 0.9rem;">
                            <span th:text="${channel.followers != null ? #numbers.formatInteger(channel.followers, 0, 'COMMA') : '0'}">0</span>
                            <div style="font-size: 0.7rem; color: var(--muted);">followers</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Placeholder for Twitch if no channels -->
            <div th:if="${topTwitchChannels == null or topTwitchChannels.isEmpty()}">
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 1rem;">
                    <h2 style="margin: 0;">🎮 Top Twitch</h2>
                </div>

                <div style="background: var(--card-bg); border-radius: 12px; border: 1px solid var(--border); padding: 2rem; text-align: center; color: var(--muted);">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">🔍</div>
                    <p>No Twitch channels yet</p>
                    <p style="font-size: 0.9rem;">Visit the admin panel to discover some!</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Getting Started Section -->
    <section th:if="${totalChannels == 0}" style="background: var(--card-bg); padding: 2rem; border-radius: 12px; border: 1px solid var(--border); text-align: center;">
        <div style="font-size: 4rem; margin-bottom: 1rem;">🚀</div>
        <h2>Get Started</h2>
        <p style="color: var(--muted); margin-bottom: 2rem; max-width: 500px; margin-left: auto; margin-right: auto;">
            Your database is empty! Visit the admin panel to seed it with popular channels and start tracking growth.
        </p>
        <a href="/admin" class="button" style="background: var(--primary);">
            🛠️ Go to Admin Panel
        </a>
    </section>

    <!-- Features Section -->
    <section style="margin-top: 3rem;">
        <h2 style="text-align: center; margin-bottom: 2rem;">✨ Features</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">

            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">📊</div>
                <h3 style="margin-bottom: 0.5rem;">Growth Tracking</h3>
                <p style="color: var(--muted); font-size: 0.9rem;">Monitor subscriber/follower growth over time with interactive charts</p>
            </div>

            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">🔍</div>
                <h3 style="margin-bottom: 0.5rem;">Smart Discovery</h3>
                <p style="color: var(--muted); font-size: 0.9rem;">Automatically discover trending channels across different niches</p>
            </div>

            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">🏆</div>
                <h3 style="margin-bottom: 0.5rem;">Leaderboards</h3>
                <p style="color: var(--muted); font-size: 0.9rem;">Compare channels and see who's leading in subscribers and views</p>
            </div>

            <div style="background: var(--card-bg); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); text-align: center;">
                <div style="font-size: 2.5rem; margin-bottom: 1rem;">⚡</div>
                <h3 style="margin-bottom: 0.5rem;">Real-time Updates</h3>
                <p style="color: var(--muted); font-size: 0.9rem;">Daily snapshots keep your data fresh and accurate</p>
            </div>
        </div>
    </section>

    <script>
        function searchChannel(handle) {
            // Update the search input in the header and submit
            const searchInput = document.querySelector('input[name="q"]');
            const searchForm = document.querySelector('.search');
            if (searchInput && searchForm) {
                searchInput.value = handle;
                searchForm.submit();
            }
        }
    </script>

</th:block>
</html>
</th:block>
</html>
